/* ComponentDomParser 0.0.1 | @license ISC */
!function(e,o){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=o(e):e.define&&"function"==typeof e.define&&e.define.amd?e.define("ComponentDomParser",[],function(){return o(e)}):e.ComponentDomParser=o(e)}(window,function(e){"use strict";var o=e.document,t=function(e){this._checkForRequiredConstants(e),this.contextElement=e.contextElement||o.body,this.dataSelector=e.dataSelector,this.componentIndex=e.componentIndex,this.componentDidMountCallback=e.componentDidMountCallback,this.fallbackHandlers=e.fallback||null,this._fallbackRules=null,this._fallbackRulesRegex=null};return t.prototype._checkForRequiredConstants=function(e){if(!e)throw new Error("ComponentDomParser Error: No option object was specified.");if(!e.dataSelector)throw new Error("ComponentDomParser Error: No dataSelector was specified.");if(!e.componentIndex)throw new Error("ComponentDomParser Error: No componentIndex was specified.");if(e.componentDidMountCallback&&"function"!=typeof e.componentDidMountCallback)throw new Error("ComponentDomParser Error: The componentDidMountCallback option must be a function.")},t.prototype.parse=function(){var e=this.contextElement.querySelectorAll("[data-"+this.dataSelector+"]"),o=Array.prototype.slice.call(e,0),t=this;return o.forEach(function(e){var o=e.dataset[t.dataSelector],n=t.componentIndex[o]||t._applyFallbackRules(e,o);n?t._mountComponent(e,n):console.info('ComponentDomParser Info: Component "'+o+'" is not present in the passed componentIndex:',t.componentIndex)}),this},t.prototype._mountComponent=function(e,o){var t=new o(e);return this.componentDidMountCallback&&this.componentDidMountCallback(t),t},t.prototype._applyFallbackRules=function(e,o){var t=this;if(this.fallbackHandlers){var n=function(){var n=void 0,a=void 0;t._fallbackRules||(t._fallbackRules=Object.keys(t.fallbackHandlers)),t._fallbackRulesRegex||(t._fallbackRulesRegex=t._fallbackRules.map(function(e){return new RegExp("^"+e.replace(/[^\w\s]/g,"$&").replace(/\*/g,"\\w+")+"$")}));for(var r=0;(n=t._fallbackRules[r])&&(a=t._fallbackRulesRegex[r]);r++)if(o.match(a)){var l=t.fallbackHandlers[n],c=l(o,e);if(c)return{v:c}}}();if("object"==typeof n)return n.v}return!1},t});