/* ComponentDomParser 0.0.2 | @license MIT */
!function(o,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e(o):o.define&&"function"==typeof o.define&&o.define.amd?o.define("ComponentDomParser",[],function(){return e(o)}):o.ComponentDomParser=e(o)}(window,function(o){"use strict";var e=o.document,n=function(o){this._checkForRequiredConstants(o),this.dataSelector=o.dataSelector,this.componentIndex=o.componentIndex,this.componentDidMountCallback=o.componentDidMountCallback,this.nonIndexedComponentPolicies=o.nonIndexedComponentPolicies||null,this._isLoggingEnabled=!1||o.isLoggingEnabled,this._policyRules=o.nonIndexedComponentPolicies?Object.keys(o.nonIndexedComponentPolicies):null,this._policyRulesRegex=this._policyRules?this._policyRules.map(function(o){return new RegExp("^"+o.replace(/[^\w\s]/g,"$&").replace(/\*/g,"\\w+")+"$")}):null,this._mountedElementsCache=[]};return n.prototype._checkForRequiredConstants=function(o){if(!o)throw new Error("ComponentDomParser Error: No option object was specified.");if(!o.dataSelector)throw new Error("ComponentDomParser Error: No dataSelector was specified.");if(!o.componentIndex)throw new Error("ComponentDomParser Error: No componentIndex was specified.");if(o.componentDidMountCallback&&"function"!=typeof o.componentDidMountCallback)throw new Error("ComponentDomParser Error: The componentDidMountCallback option must be a function.")},n.prototype.parse=function(o){o=o||e.body;var n=o.querySelectorAll("[data-"+this.dataSelector+"]"),t=Array.prototype.slice.call(n,0),i=this;return t.forEach(function(o){var e=o.dataset[i.dataSelector],n=i.componentIndex[e]||i._getNonIndexComponentPolicy(o,e);n?i._mountedElementsCache.indexOf(o)<0&&i._mountComponent(o,n):this._isLoggingEnabled&&console.info('ComponentDomParser Info: Component "'+e+'" isn`t present in the passed componentIndex while mounting a node.',i.componentIndex,o)}),this},n.prototype._mountComponent=function(o,e){var n=new e(o);return this._mountedElementsCache.push(o),this.componentDidMountCallback&&this.componentDidMountCallback(n),n},n.prototype._getNonIndexComponentPolicy=function(o,e){var n=this.nonIndexedComponentPolicies;if(n)for(var t=null,i=null,r=0;(t=this._policyRules[r])&&(i=this._policyRulesRegex[r]);r++)if(e.match(i)){var c=n[t],s=c(e,o);if(s)return s}return!1},n});